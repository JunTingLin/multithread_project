# multithread_project

## 110-2ä½œæ¥­ç³»çµ±
## Thread ç¨‹å¼ä½œæ¥­-å¤šäººäº•å­—éŠæˆ²
## æŒ‡å°è€å¸«: å‘¨ç«‹å¾·æ•™æˆ

## å£¹.	å‰è¨€
æœ¬æ¬¡OSä½œæ¥­è¦ç¹³äº¤Thread å°ç¨‹å¼ï¼Œå› ç‚ºå°javaæ¯”è¼ƒç†Ÿæ‚‰ï¼Œæ•…é¸ç”¨javaä½œç‚ºç¨‹å¼èªè¨€ï¼Œç”¨eclipse IDEé–‹ç™¼ã€‚ç¶²è·¯ä¸Šçœ‹åˆ°è¨±å¤šç”¨javaå¤šåŸ·è¡Œç·’å¯¦ç¾TCPç¶²è·¯çš„socketç¨‹å¼è¨­è¨ˆï¼Œä½†æœ‰é‘‘æ–¼æ±‚æ–°æ±‚è®Šï¼Œæ•…åŸºæ–¼TCPçš„æ¶æ§‹ä¸‹è¨­è¨ˆæˆå¯ä»¥ã€Œå¤šäººã€é€£ä¸Šseverã€Œå°ç©ã€çš„äº•å­—å°éŠæˆ²ã€‚

## è²³.	è¦åŠƒ
è¨ˆåŠƒæ˜¯åˆ©ç”¨å¤šåŸ·è¡Œç·’ï¼Œç‚ºé€£æ¥åˆ°ä¸»ä¼ºæœå™¨çš„ç”¨æˆ¶ç«¯å‰µå»ºå¤šå€‹åŸ·è¡Œç·’ï¼Œä¸¦ç‚ºéŠæˆ²æœ¬èº«å‰µå»ºåŸ·è¡Œç·’ã€‚

## åƒ.	æµç¨‹åœ–
![image](https://user-images.githubusercontent.com/92431095/168872986-3979e6d9-7ba6-48a5-ae81-f59647dbd252.png)

## è‚†.	é‡è¦é¡åˆ¥ã€å‡½å¼ã€æŠ€è¡“
### ä¸€ã€	å‰ç«¯
#### Jframeé¡åˆ¥
å‰µå»ºè¦–çª—æ¡†ï¼Œå…§æœ‰å„ç¨®åƒæ•¸ã€æ–¹æ³•å¯å»å®šç¾©ã€ŒéŠæˆ²çª—æ¡†ã€çš„å¤§å°ã€æ¨™é¡Œã€iconç­‰ã€‚

#### Jpanelé¡åˆ¥
å®ƒç®—æ˜¯ä¸€å€‹å®¹å™¨ï¼Œèˆ‰å‡¡Jlabelæ¨™ç±¤ã€JbuttonæŒ‰éˆ•ã€TextFiledè¼¸å…¥æ¡†ç­‰ç­‰éƒ½éœ€è¦å»ºç«‹åœ¨å®¹å™¨ä¹‹ä¸Šã€‚
å› ç‚ºäº•å­—éŠæˆ²ï¼Œéœ€è¦3x3çš„ä¹å®®æ ¼ï¼Œæ•…é€™é‚Šä½¿ç”¨çš„layoutæ’ç‰ˆæ–¹å¼ç‚ºGridLayoutç¶²æ ¼æ’ç‰ˆã€‚

#### Jlabelé¡åˆ¥
å°±å¦‚ä¸Šé¢æ‰€æï¼Œå®ƒå¿…é ˆè¦å»ºç«‹åœ¨Jpanelä¸Šé¢çš„ä¸€å€‹å…ƒä»¶ï¼Œé€™è£¡æœƒå»è·‘whileè¿´åœˆå»ç›£è½ï¼Œæ ¹æ“šå¾è¼¸å…¥æµå¾—åˆ°çš„æ–‡å­—ï¼Œå»åˆ¤æ–·Jlabelä¸Šé¢è¦å‘ˆç¾å“ªäº›è¨Šæ¯ã€‚


### äºŒã€	å¾Œç«¯
#### I.	Socket
åœ¨å–®åŸ·è¡Œç·’ä¸‹ï¼Œå­˜åœ¨ä¸€å€‹å•é¡Œï¼Œå¦‚æœä¼ºæœå™¨ç«¯åœ¨å»ºç«‹é€£ç·šå¾Œå‚³é€å¤šæ¢è³‡è¨Šçµ¦å®¢æˆ¶ç«¯ï¼Œå®¢æˆ¶ç«¯æ˜¯ç„¡æ³•å…¨éƒ¨æ¥æ”¶çš„ï¼ŒåŸå› åœ¨æ–¼å®¢æˆ¶ç«¯ç‚ºå–®åŸ·è¡Œç·’ï¼Œåªæ¥å—äº†ç¬¬ä¸€æ¢è³‡è¨Šï¼Œå‰©é¤˜è³‡è¨Šé˜»å¡ç­‰å¾…ä¸‹ä¸€æ¬¡å‚³é€ã€‚æ‰€ä»¥é€™é€ æˆäº†å®¢æˆ¶ç«¯ç„¡æ³•è™•ç†è¨Šæ¯ä½‡åˆ—ï¼Œæ¯æ¬¡åªæ¥æ”¶ä¸¦è¼¸å‡ºä¸€æ¢ä¼ºæœå™¨è³‡è¨Šï¼Œå‡ºç¾è³‡è¨Šä¸åŒæ­¥å•é¡Œã€‚

ä½¿ç”¨javaçš„Socketç¶²è·¯é€šè¨Šï¼›å…©ç«¯åˆ†åˆ¥æœ‰ä¸€å€‹å¥—æ¥å­—Socketï¼Œç”¨æ–¼å…©è€…ä¹‹é–“çš„é€šè¨Šã€‚å®¢æˆ¶ç«¯å‘ä¼ºæœå™¨å‚³é€è«‹æ±‚ï¼Œå»ºç«‹socketé€²è¡Œé€£ç·šã€‚æœå‹™ç«¯å‰‡éš¨æ™‚ç›£è½å®¢æˆ¶ç«¯ç™¼èµ·çš„è«‹æ±‚ã€‚

##### ServerSocketé¡åˆ¥
å‚³å…¥portè™Ÿï¼Œå‰µå»ºç¶å®šåˆ°æŒ‡å®šåŸ çš„ä¼ºæœå™¨socket

##### Socketé¡åˆ¥
å¯å‚³å…¥å…©ç­†åƒæ•¸ï¼Œç¬¬ä¸€å€‹ç‚ºsever ip addressï¼Œç¬¬äºŒå€‹ç‚ºportè™Ÿã€‚å‰µå»ºstream socketä¸¦å°‡å…¶é€£æ¥åˆ°æŒ‡å®šä¸»æ©Ÿä¸Šçš„æŒ‡å®šåŸ è™Ÿã€‚

##### acceptæ–¹æ³•
ç›£è½è¦èˆ‡æ­¤socketå»ºç«‹çš„é€£æ¥ä¸¦æ¥å—å®ƒã€‚è©²æ–¹æ³•å°‡ä¸€ç›´blocké˜»å¡ï¼Œç›´åˆ°å»ºç«‹é€£æ¥ã€‚

#### II.	Stream(æµ)
ç©å®¶ç”±å­—å…ƒæ¨™è¨˜è¡¨ç¤ºï¼Œè©²å­—å…ƒæ¨™è¨˜ç‚ºâ€œXâ€æˆ–â€œOâ€ã€‚
ç‚ºäº†èˆ‡å®¢æˆ¶ç«¯é€šä¿¡ï¼Œç©å®¶playeræœ‰ä¸€å€‹å¸¶æœ‰å…¶è¼¸å…¥inputStreamå’Œè¼¸å‡ºæµoutputStreamçš„socketã€‚å¦å¤–å†ç”¨readerè·Ÿwriteræ¥æ”¶"æµ"ï¼Œå»è®€å–è£¡é¢çš„æ–‡å­—


å®¢æˆ¶ç«¯çš„ä¸»ç·šç¨‹å°‡ç›£è½ä¾†è‡ªä¼ºæœå™¨çš„æ¶ˆæ¯ã€‚
ç¬¬ä¸€æ¢æ¶ˆæ¯å°‡æ˜¯æˆ‘å€‘æ”¶åˆ°æ¨™è¨˜çš„â€œWELCOMEâ€æ¶ˆæ¯ã€‚
ç„¶å¾Œæˆ‘å€‘é€²å…¥ä¸€å€‹å¾ªç’°ç›£è½â€œVALID_MOVEâ€ã€â€œOPPONENT_MOVEDâ€ã€â€œVICTORYâ€ã€ â€œDEFEATâ€ã€â€œTIEâ€ã€â€œOPPONENT_QUITâ€æˆ–â€œMESSAGEâ€æ¶ˆæ¯ï¼Œä¸¦é©ç•¶åœ°è™•ç†æ¯æ¢æ¶ˆæ¯ã€‚
â€œVICTORYâ€ã€â€œDEFEATâ€å’Œâ€œTIEâ€è©¢å•ç”¨æˆ¶æ˜¯å¦è¦ç©å¦ä¸€å€‹éŠæˆ²ã€‚

å¦‚æœæ˜¯Falseï¼Œå‰‡é€€å‡ºè¿´åœˆä¸¦å‘ä¼ºæœå™¨ç™¼é€â€œQUITâ€æ¶ˆæ¯ã€‚
å¦‚æœæ”¶åˆ° OPPONENT_QUIT æ¶ˆæ¯ï¼Œå‰‡é€€å‡ºå¾ªç’°ï¼Œä¸”ä¼ºæœå™¨ä¹Ÿæœƒç™¼é€ä¸€æ¢QUITâ€æ¶ˆæ¯ã€‚

##### Reader(è®€é€²ä¾†)
å¾socketå»getInputStream->è®€åˆ°çš„äºŒé€²ä½é¤µçµ¦InputStreamReader->å†é€ébufferedReaderå»readLineï¼Œè®€å‡ºå…§å®¹

##### Writer(å¯«å‡ºå»)
å¾socketå»getOutputStream->è®€åˆ°çš„é¤µçµ¦PrintWriter->é€éprintlnçš„æ–¹å¼printåœ¨streamä¸Šé¢ï¼Œä¸¦flushå‡ºå»

##### flushæ–¹æ³•
å¯ä»¥æŠŠstreamæ¨é€å‡ºï¼Œä½†åƒPrinteWriterå¯åœ¨å»ºæ§‹å¼ä¸‹ç¬¬äºŒå€‹åƒæ•¸ï¼Œè‡ªå‹•auto flush

#### III.	Thread
playeræœƒå»ç¹¼æ‰¿threadï¼ŒæŠŠè¦åŸ·è¡Œçš„å…§å®¹å¯«åœ¨player classè£¡çš„runï¼Œè¦åŸ·è¡Œæ™‚é€éstartå‡½å¼å‘¼å«ã€‚

â—‹è¨»ç¨‹å¼ç¢¼å…§å‡æœ‰æ›´å®Œæ•´çš„è¨»è§£èªªæ˜å–”~~

## ä¼.	éŠæˆ²ç•«é¢æˆªåœ–
### ä¸€ã€	æ›¸é¢æ–‡å­—DEMO
1. å•Ÿå‹•äº•å­—éŠæˆ²ä¼ºæœå™¨
![image](https://user-images.githubusercontent.com/92431095/168874027-44a31178-62fc-4e41-aa6c-a84d8107f7ed.png)

2. é€™é‚Šç”¨è™›æ“¬æ©Ÿæ¨¡æ“¬ä¸€ä½ç·šä¸Šç©å®¶(client1ã€playerX)ï¼Œé€£ç·šåˆ°server ip
![image](https://user-images.githubusercontent.com/92431095/168874103-4a0f8e16-72f2-4819-9edb-98399ceacfcd.png)

3.å¦å¤–ä¸€ä½ç©å®¶(client2ã€playerO)é¸æ“‡å’Œä¼ºæœå™¨åŒç¶²åŸŸï¼Œé€£ç·šåˆ°localhost
![image](https://user-images.githubusercontent.com/92431095/168874135-2d1732ae-b96b-4464-b98c-3c609577bf66.png)

4. é€²è¡Œäº•å­—éŠæˆ²å°æ±º
![image](https://user-images.githubusercontent.com/92431095/168874209-ee5f5554-46f3-4fc4-b663-62d89f0debae.png)

â—‹è¨»é ­åƒè¨­è¨ˆç´”å±¬æœ‰è¶£ï¼Œå‡å¦‚æœ‰å†’çŠ¯åˆ°ï¼Œè«‹å†å‘ŠçŸ¥ğŸ˜…

5. å¹³å±€&å‹è² 

![image](https://user-images.githubusercontent.com/92431095/168874453-6974dcd8-4120-42f5-a9c9-48fd1e469a75.png)

6. å› ç‚ºæ¯ä½ç©å®¶éƒ½æœƒåˆ†é…åˆ°threadï¼Œæ‰€ä»¥è¦ã€Œå¤šäººã€é€£ä¸Šä¼ºæœå™¨ã€Œå°ç©ã€ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¦‚ä¸‹åœ–:

![image](https://user-images.githubusercontent.com/92431095/168874647-794e1b87-851a-4663-ba0d-e98b440b241e.png)

å¾å·¦é‚Šç›£çœ‹è¦–çª—ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸€å°serverï¼Œè·Ÿå…«å€‹client(å››å°ç©å®¶)

### äºŒã€	å½±ç‰‡æ–‡å­—DEMO
å½±ç‰‡é€£çµ: https://youtu.be/pYok9U2lsQE

## é™¸.	åƒè€ƒ
+ Javaå¤šåŸ·è¡Œç·’å¯¦ç¾TCPç¶²è·¯Socketç¨‹å¼è¨­è¨ˆ(C/Sé€šè¨Š)
+	java12å®˜æ–¹æ–‡ä»¶èªªæ˜
+	Java Sockets: Multithreaded Server

 
